<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Maze</title>
		<script src="http://threejs.org/build/three.js"></script>
		<script src="https://dl.dropboxusercontent.com/u/3587259/Code/Threejs/OrbitControls.js"></script>
		<script>
			window.onload = function() { 
			
			var renderer = new THREE.WebGLRenderer({antialias: true }); // set antialias as true
			renderer.setSize(800, 600); // Scene size (Width, Height)
			renderer.setClearColor( 0xdddddd );
			
			document.body.appendChild(renderer.domElement);
			
			// define the scene
			
			var scene = new THREE.Scene();
			scene.fog = new THREE.FogExp2( 0xcccccc, 0.002 );
			
			//define the camera
			var camera = new THREE.PerspectiveCamera(
					45,             // Field of view
					800 / 600,      // Aspect ratio
					0.1,            // Near plane
					500           // Far plane
			);
			camera.position.x= 0;  //default value anyway
			camera.position.y= 10;  //default value anyway
			camera.position.z = 100;  //We move the camera backwards to see all the scene
			camera.lookAt(scene.position);
			
			// object
			var sides = ['image/sky_texture.jpg','image/sky_texture.jpg','image/sky_texture.jpg','image/sky_texture.jpg','image/sky_texture.jpg','image/sky_texture.jpg'];
			var skyboxTexture = THREE.ImageUtils.loadTextureCube(sides);
			var shader = THREE.ShaderLib['cube'];
			shader.uniforms['tCube'].value = skyboxTexture;
			var skyBoxMaterial = new THREE.ShaderMaterial( {
			fragmentShader: shader.fragmentShader,
			vertexShader: shader.vertexShader,
			uniforms: shader.uniforms,
			depthWrite: false,
			side: THREE.BackSide
			});
			var skybox = new THREE.Mesh(new THREE.CubeGeometry(500, 500, 500),skyBoxMaterial);
			skyBoxMaterial.needsUpdate = true;
			scene.add(skybox);
			var axis = new THREE.AxisHelper(10);
			scene.add(axis);
			var controls = new THREE.OrbitControls(camera,renderer.domElement);
			controls.addEventListener('change',render);
			
			//plane object
		    var planeGeometry = new THREE.PlaneGeometry(500, 500, 500);
            //load texture:
			var texture = new THREE.TextureLoader().load( "image/grass.jpg" );
            var material = new THREE.MeshBasicMaterial( {map: texture} );
            var plane = new THREE.Mesh(planeGeometry,material);
			plane.rotation.x = -.5*Math.PI;
            scene.add(plane);
			
			var spLight = new THREE.PointLight(0xffffff, 1.75, 1000);
			spLight.position.set(-100, 200, 200);
			scene.add(spLight);
			
			
			/*
			var spotLight = new THREE.SpotLight(0xFFFFFF);
			//spotLight.castShadow = true;
			spotLight.position.set (15,30,50);
			scene.add(spotLight);
			*/
			
			// Render the scene:
			var render = function () {
				requestAnimationFrame(render); //this will update scene frames.
				//controls.update();
			    renderer.render(scene, camera); //renders the whole scene, updating it recursively.
			};
			render();
		};
		</script>
	</head>
	<body></body>
</html>